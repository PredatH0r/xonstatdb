CREATE TABLE xonstat.player_game_stats
(
  player_game_stat_id bigserial NOT NULL,
  player_id integer NOT NULL,
  game_id bigint NOT NULL,
  stat_type character varying(1),
  nick character varying(64),
  team integer,
  kills integer,
  deaths integer,
  suicides integer,
  score integer,
  "time" interval,
  held interval,
  captures integer,
  pickups integer,
  drops integer,
  "returns" integer,
  collects integer,
  destroys integer,
  destroys_holding_key integer,
  pushes integer,
  pushed integer,
  carrier_frags integer,
  create_dt timestamp without time zone NOT NULL,
  CONSTRAINT player_game_stats_pk PRIMARY KEY (player_game_stat_id),
  CONSTRAINT player_game_stats_fk001 FOREIGN KEY (player_id)
      REFERENCES xonstat.players (player_id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT player_game_stats_fk002 FOREIGN KEY (game_id)
      REFERENCES xonstat.games (game_id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT player_game_stats_uk001 UNIQUE (player_id, game_id, stat_type)
)
WITH (
  OIDS=FALSE
);
CREATE INDEX player_game_stats_ix01 on player_game_stats(create_dt);
ALTER TABLE xonstat.player_game_stats OWNER TO xonstat;

CREATE TABLE xonstat.player_game_stats_2011Q2 (
    CHECK ( create_dt >= DATE '2011-04-01' AND create_dt < DATE '2011-07-01' ) 
) INHERITS (player_game_stats);
CREATE INDEX player_game_stats_2011Q2_ix01 on player_game_stats_2011Q2(create_dt);
ALTER TABLE xonstat.player_game_stats_2011Q2 OWNER TO xonstat;

CREATE TABLE xonstat.player_game_stats_2011Q3 ( 
    CHECK ( create_dt >= DATE '2011-07-01' AND create_dt < DATE '2011-10-01' ) 
) INHERITS (player_game_stats);
CREATE INDEX player_game_stats_2011Q3_ix01 on player_game_stats_2011Q3(create_dt);
ALTER TABLE xonstat.player_game_stats_2011Q3 OWNER TO xonstat;

CREATE TABLE xonstat.player_game_stats_2011Q4 ( 
    CHECK ( create_dt >= DATE '2011-10-01' AND create_dt < DATE '2012-01-01' ) 
) INHERITS (player_game_stats);
CREATE INDEX player_game_stats_2011Q4_ix01 on player_game_stats_2011Q4(create_dt);
ALTER TABLE xonstat.player_game_stats_2011Q4 OWNER TO xonstat;

CREATE TABLE xonstat.player_game_stats_2012Q1 ( 
    CHECK ( create_dt >= DATE '2012-01-01' AND create_dt < DATE '2012-04-01' ) 
) INHERITS (player_game_stats);
CREATE INDEX player_game_stats_2012Q1_ix01 on player_game_stats_2012Q1(create_dt);
ALTER TABLE xonstat.player_game_stats_2012Q1 OWNER TO xonstat;

CREATE TABLE xonstat.player_game_stats_2012Q2 ( 
    CHECK ( create_dt >= DATE '2012-04-01' AND create_dt < DATE '2012-07-01' ) 
) INHERITS (player_game_stats);
CREATE INDEX player_game_stats_2012Q2_ix01 on player_game_stats_2012Q2(create_dt);
ALTER TABLE xonstat.player_game_stats_2012Q2 OWNER TO xonstat;

CREATE TABLE xonstat.player_game_stats_2012Q3 ( 
    CHECK ( create_dt >= DATE '2012-07-01' AND create_dt < DATE '2012-10-01' ) 
) INHERITS (player_game_stats);
CREATE INDEX player_game_stats_2012Q3_ix01 on player_game_stats_2012Q3(create_dt);
ALTER TABLE xonstat.player_game_stats_2012Q3 OWNER TO xonstat;

CREATE TABLE xonstat.player_game_stats_2012Q4 ( 
    CHECK ( create_dt >= DATE '2012-10-01' AND create_dt < DATE '2013-01-01' ) 
) INHERITS (player_game_stats);
CREATE INDEX player_game_stats_2012Q4_ix01 on player_game_stats_2012Q4(create_dt);
ALTER TABLE xonstat.player_game_stats_2012Q4 OWNER TO xonstat;

CREATE TABLE xonstat.player_game_stats_2013Q1 ( 
    CHECK ( create_dt >= DATE '2013-01-01' AND create_dt < DATE '2013-04-01' ) 
) INHERITS (player_game_stats);
CREATE INDEX player_game_stats_2013Q1_ix01 on player_game_stats_2013Q1(create_dt);
ALTER TABLE xonstat.player_game_stats_2013Q1 OWNER TO xonstat;

CREATE TABLE xonstat.player_game_stats_2013Q2 ( 
    CHECK ( create_dt >= DATE '2013-04-01' AND create_dt < DATE '2013-07-01' ) 
) INHERITS (player_game_stats);
CREATE INDEX player_game_stats_2013Q2_ix01 on player_game_stats_2013Q2(create_dt);
ALTER TABLE xonstat.player_game_stats_2013Q2 OWNER TO xonstat;
